{% comment %}
Dealer Locator section with interactive map
{% endcomment %}

<section class="relative w-full py-20 bg-gradient-to-b from-black via-gray-900 to-black overflow-hidden">
  <!-- Background text -->
  <div class="absolute top-10 left-1/2 -translate-x-1/2 opacity-5 font-montserrat font-bold text-white text-[140px] tracking-[5.60px] leading-none z-0 select-none animate-on-scroll">
    DEALERS
  </div>

  <div class="relative z-10 w-full mx-auto px-4 sm:px-6 lg:px-8">
    <!-- Section heading -->
    <div class="text-center mb-16 animate-on-scroll">
      <h2 class="font-montserrat font-bold text-white text-[48px] mb-4 tracking-wide">
        {{ section.settings.section_title | default: "FIND A DEALER NEAR YOU" }}
      </h2>
      <p class="font-montserrat font-normal text-gray-300 text-lg max-w-3xl mx-auto leading-relaxed">
        {{ section.settings.section_description | default: "Connect with our certified dealers across Ontario for expert consultation and professional installation services." }}
      </p>
    </div>

    <!-- Search Bar -->
    <div class="max-w-2xl mx-auto mb-12 animate-on-scroll">
      <div class="relative">
        <input 
          type="text" 
          placeholder="{{ section.settings.search_placeholder | default: 'Enter your city or postal code...' }}"
          class="w-full px-6 py-4 bg-gray-800/50 border border-white/20 rounded-full text-white placeholder-gray-400 font-montserrat focus:outline-none focus:border-[{{ settings.primary_color }}] focus:ring-2 focus:ring-[{{ settings.primary_color }}]/20 transition-all duration-300"
          id="dealer-search"
        >
        <button 
          type="button"
          class="absolute right-2 top-1/2 -translate-y-1/2 bg-[{{ settings.primary_color }}] hover:bg-[{{ settings.accent_color }}] text-white px-6 py-2 rounded-full transition-all duration-300 hover:scale-105"
          id="search-dealers"
        >
          <svg class="w-5 h-5" fill="none" stroke="currentColor" viewBox="0 0 24 24">
            <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M21 21l-6-6m2-5a7 7 0 11-14 0 7 7 0 0114 0z"></path>
          </svg>
        </button>
      </div>
    </div>

    <!-- Dealers Grid -->
    <div class="grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-8 mb-12" id="dealers-grid">
      {% for block in section.blocks %}
        {% if block.type == 'dealer' %}
          <div class="group relative overflow-hidden rounded-2xl bg-gradient-to-br from-gray-800/50 to-gray-900/50 backdrop-blur-sm border border-white/10 hover:border-[{{ settings.primary_color }}]/50 transition-all duration-500 hover:scale-105 animate-on-scroll">
            
            <!-- Dealer Header -->
            <div class="p-6 border-b border-white/10">
              <div class="flex items-start justify-between mb-4">
                <div class="flex-1">
                  <h3 class="font-montserrat font-bold text-white text-xl mb-2 group-hover:text-[{{ settings.primary_color }}] transition-colors duration-300">
                    {{ block.settings.dealer_name | default: "Mint Garage Dealer" }}
                  </h3>
                  <div class="flex items-center mb-2">
                    {% assign rating = block.settings.dealer_rating | default: 5 %}
                    {% for i in (1..5) %}
                      {% if i <= rating %}
                        <svg class="w-4 h-4 text-yellow-400 mr-1" fill="currentColor" viewBox="0 0 24 24">
                          <path d="M12 2l3.09 6.26L22 9.27l-5 4.87 1.18 6.88L12 17.77l-6.18 3.25L7 14.14 2 9.27l6.91-1.01L12 2z"/>
                        </svg>
                      {% else %}
                        <svg class="w-4 h-4 text-gray-400 mr-1" fill="currentColor" viewBox="0 0 24 24">
                          <path d="M12 2l3.09 6.26L22 9.27l-5 4.87 1.18 6.88L12 17.77l-6.18 3.25L7 14.14 2 9.27l6.91-1.01L12 2z"/>
                        </svg>
                      {% endif %}
                    {% endfor %}
                    <span class="text-gray-400 text-sm ml-2">
                      ({{ block.settings.dealer_reviews | default: "25" }} reviews)
                    </span>
                  </div>
                </div>
                {% if block.settings.dealer_distance %}
                  <div class="bg-[{{ settings.primary_color }}]/20 text-[{{ settings.primary_color }}] px-3 py-1 rounded-full text-sm font-montserrat font-medium">
                    {{ block.settings.dealer_distance }} km
                  </div>
                {% endif %}
              </div>
            </div>

            <!-- Dealer Details -->
            <div class="p-6 space-y-4">
              <!-- Address -->
              <div class="flex items-start space-x-3">
                <svg class="w-5 h-5 text-[{{ settings.primary_color }}] mt-0.5 flex-shrink-0" fill="currentColor" viewBox="0 0 24 24">
                  <path d="M12 2C8.13 2 5 5.13 5 9c0 5.25 7 13 7 13s7-7.75 7-13c0-3.87-3.13-7-7-7zm0 9.5c-1.38 0-2.5-1.12-2.5-2.5s1.12-2.5 2.5-2.5 2.5 1.12 2.5 2.5-1.12 2.5-2.5 2.5z"/>
                </svg>
                <div>
                  <p class="text-white font-montserrat font-medium">
                    {{ block.settings.dealer_address | default: "123 Main Street" }}
                  </p>
                  <p class="text-gray-400 text-sm">
                    {{ block.settings.dealer_city | default: "Toronto" }}, {{ block.settings.dealer_province | default: "ON" }} {{ block.settings.dealer_postal | default: "M5V 3A8" }}
                  </p>
                </div>
              </div>

              <!-- Phone -->
              <div class="flex items-center space-x-3">
                <svg class="w-5 h-5 text-[{{ settings.primary_color }}] flex-shrink-0" fill="currentColor" viewBox="0 0 24 24">
                  <path d="M6.62 10.79c1.44 2.83 3.76 5.14 6.59 6.59l2.2-2.2c.27-.27.67-.36 1.02-.24 1.12.37 2.33.57 3.57.57.55 0 1 .45 1 1V20c0 .55-.45 1-1 1-9.39 0-17-7.61-17-17 0-.55.45-1 1-1h3.5c.55 0 1 .45 1 1 0 1.25.2 2.45.57 3.57.11.35.03.74-.25 1.02l-2.2 2.2z"/>
                </svg>
                <a href="tel:{{ block.settings.dealer_phone }}" class="text-white hover:text-[{{ settings.primary_color }}] font-montserrat transition-colors duration-300">
                  {{ block.settings.dealer_phone | default: "(416) 555-0123" }}
                </a>
              </div>

              <!-- Hours -->
              <div class="flex items-start space-x-3">
                <svg class="w-5 h-5 text-[{{ settings.primary_color }}] mt-0.5 flex-shrink-0" fill="currentColor" viewBox="0 0 24 24">
                  <path d="M12,2A10,10 0 0,0 2,12A10,10 0 0,0 12,22A10,10 0 0,0 22,12A10,10 0 0,0 12,2M16.2,16.2L11,13V7H12.5V12.2L17,14.9L16.2,16.2Z"/>
                </svg>
                <div class="text-sm">
                  <p class="text-white font-montserrat">
                    <span class="font-medium">Mon-Fri:</span> {{ block.settings.dealer_hours_weekday | default: "9:00 AM - 6:00 PM" }}
                  </p>
                  <p class="text-white font-montserrat">
                    <span class="font-medium">Sat:</span> {{ block.settings.dealer_hours_saturday | default: "9:00 AM - 4:00 PM" }}
                  </p>
                  <p class="text-white font-montserrat">
                    <span class="font-medium">Sun:</span> {{ block.settings.dealer_hours_sunday | default: "Closed" }}
                  </p>
                </div>
              </div>

              <!-- Services -->
              {% if block.settings.dealer_services != blank %}
                <div class="flex flex-wrap gap-2 pt-2">
                  {% assign services = block.settings.dealer_services | split: ',' %}
                  {% for service in services limit: 3 %}
                    <span class="bg-[{{ settings.primary_color }}]/20 text-[{{ settings.primary_color }}] px-3 py-1 rounded-full text-xs font-montserrat font-medium">
                      {{ service | strip }}
                    </span>
                  {% endfor %}
                </div>
              {% endif %}
            </div>

            <!-- Contact Actions -->
            <div class="p-6 pt-0 flex space-x-3">
              <a href="tel:{{ block.settings.dealer_phone }}" class="flex-1 bg-[{{ settings.primary_color }}] hover:bg-[{{ settings.accent_color }}] text-white py-3 px-4 rounded-full font-montserrat font-medium text-center transition-all duration-300 hover:scale-105">
                Call Now
              </a>
              {% if block.settings.dealer_email %}
                <a href="mailto:{{ block.settings.dealer_email }}" class="flex-1 border-2 border-[{{ settings.primary_color }}] text-[{{ settings.primary_color }}] hover:bg-[{{ settings.primary_color }}] hover:text-white py-3 px-4 rounded-full font-montserrat font-medium text-center transition-all duration-300">
                  Email
                </a>
              {% endif %}
            </div>
          </div>
        {% endif %}
      {% endfor %}
    </div>

    <!-- Map placeholder -->
    <div class="bg-gray-800/50 border border-white/20 rounded-2xl p-8 text-center animate-on-scroll">
      <div class="max-w-md mx-auto space-y-4">
        <svg class="w-16 h-16 text-[{{ settings.primary_color }}] mx-auto" fill="currentColor" viewBox="0 0 24 24">
          <path d="M12 2C8.13 2 5 5.13 5 9c0 5.25 7 13 7 13s7-7.75 7-13c0-3.87-3.13-7-7-7zm0 9.5c-1.38 0-2.5-1.12-2.5-2.5s1.12-2.5 2.5-2.5 2.5 1.12 2.5 2.5-1.12 2.5-2.5 2.5z"/>
        </svg>
        <h3 class="font-montserrat font-bold text-white text-xl">Interactive Map</h3>
        <p class="font-montserrat text-gray-300">
          Use the search above to find dealers near you, or contact our team for personalized recommendations.
        </p>
      </div>
    </div>
  </div>
</section>

{% schema %}
{
  "name": "Dealer Locator",
  "tag": "section",
  "class": "section",
  "settings": [
    {
      "type": "text",
      "id": "section_title",
      "label": "Section Title",
      "default": "FIND A DEALER NEAR YOU"
    },
    {
      "type": "textarea",
      "id": "section_description",
      "label": "Section Description",
      "default": "Connect with our certified dealers across Ontario for expert consultation and professional installation services."
    },
    {
      "type": "text",
      "id": "search_placeholder",
      "label": "Search Placeholder",
      "default": "Enter your city or postal code..."
    }
  ],
  "blocks": [
    {
      "type": "dealer",
      "name": "Dealer",
      "settings": [
        {
          "type": "text",
          "id": "dealer_name",
          "label": "Dealer Name",
          "default": "Mint Garage Toronto"
        },
        {
          "type": "text",
          "id": "dealer_address",
          "label": "Street Address",
          "default": "123 Main Street"
        },
        {
          "type": "text",
          "id": "dealer_city",
          "label": "City",
          "default": "Toronto"
        },
        {
          "type": "text",
          "id": "dealer_province",
          "label": "Province",
          "default": "ON"
        },
        {
          "type": "text",
          "id": "dealer_postal",
          "label": "Postal Code",
          "default": "M5V 3A8"
        },
        {
          "type": "text",
          "id": "dealer_phone",
          "label": "Phone Number",
          "default": "(416) 555-0123"
        },
        {
          "type": "text",
          "id": "dealer_email",
          "label": "Email Address"
        },
        {
          "type": "range",
          "id": "dealer_rating",
          "label": "Rating",
          "min": 1,
          "max": 5,
          "step": 1,
          "default": 5
        },
        {
          "type": "text",
          "id": "dealer_reviews",
          "label": "Number of Reviews",
          "default": "25"
        },
        {
          "type": "text",
          "id": "dealer_distance",
          "label": "Distance (km)"
        },
        {
          "type": "text",
          "id": "dealer_hours_weekday",
          "label": "Weekday Hours",
          "default": "9:00 AM - 6:00 PM"
        },
        {
          "type": "text",
          "id": "dealer_hours_saturday",
          "label": "Saturday Hours",
          "default": "9:00 AM - 4:00 PM"
        },
        {
          "type": "text",
          "id": "dealer_hours_sunday",
          "label": "Sunday Hours",
          "default": "Closed"
        },
        {
          "type": "text",
          "id": "dealer_services",
          "label": "Services (comma-separated)",
          "default": "Flooring, Storage, Workbenches"
        }
      ]
    }
  ],
  "presets": [
    {
      "name": "Dealer Locator",
      "blocks": [
        {
          "type": "dealer",
          "settings": {
            "dealer_name": "Mint Garage Toronto",
            "dealer_city": "Toronto",
            "dealer_phone": "(416) 555-0123"
          }
        },
        {
          "type": "dealer",
          "settings": {
            "dealer_name": "Mint Garage Mississauga",
            "dealer_city": "Mississauga",
            "dealer_phone": "(905) 555-0123"
          }
        }
      ]
    }
  ]
}
{% endschema %}