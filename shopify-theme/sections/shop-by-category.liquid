{% comment %}
Shop by Category section with product categories
{% endcomment %}

<section class="relative w-full py-20 bg-gradient-to-b from-black via-gray-900 to-black overflow-hidden">
  <!-- Background text -->
  <div class="absolute top-10 left-1/2 -translate-x-1/2 opacity-5 font-montserrat font-bold text-white text-[140px] tracking-[5.60px] leading-none z-0 select-none animate-on-scroll">
    CATEGORIES
  </div>

  <div class="relative z-10 w-full mx-auto px-4 sm:px-6 lg:px-8">
    <!-- Section heading -->
    <div class="text-center mb-16 animate-on-scroll">
      <h2 class="font-montserrat font-bold text-white text-[48px] mb-4 tracking-wide">
        {{ section.settings.section_title | default: "SHOP BY CATEGORY" }}
      </h2>
      <p class="font-montserrat font-normal text-gray-300 text-lg max-w-3xl mx-auto leading-relaxed">
        {{ section.settings.section_description | default: "Discover our comprehensive range of garage transformation solutions, from premium flooring to innovative storage systems." }}
      </p>
    </div>

    <!-- Categories Grid -->
    <div class="grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-8 mb-16">
      {% for block in section.blocks %}
        {% if block.type == 'category' %}
          <div class="group relative overflow-hidden rounded-2xl bg-gradient-to-br from-gray-800/50 to-gray-900/50 backdrop-blur-sm border border-white/10 hover:border-[{{ settings.primary_color }}]/50 transition-all duration-500 hover:scale-105 animate-on-scroll">
            <!-- Category Image -->
            {% if block.settings.category_image != blank %}
              <div class="aspect-[4/3] overflow-hidden">
                <img 
                  src="{{ block.settings.category_image | image_url: width: 600 }}" 
                  alt="{{ block.settings.category_title }}"
                  class="w-full h-full object-cover group-hover:scale-110 transition-transform duration-700"
                >
                <div class="absolute inset-0 bg-gradient-to-t from-black/80 via-black/20 to-transparent"></div>
              </div>
            {% else %}
              <div class="aspect-[4/3] bg-gradient-to-br from-gray-700 to-gray-800 flex items-center justify-center">
                <div class="text-6xl text-white/30">{{ block.settings.category_icon | default: "üè†" }}</div>
              </div>
            {% endif %}

            <!-- Category Content -->
            <div class="absolute inset-0 p-6 flex flex-col justify-end">
              <div class="space-y-2">
                <h3 class="font-montserrat font-bold text-white text-xl group-hover:text-[{{ settings.primary_color }}] transition-colors duration-300">
                  {{ block.settings.category_title | default: "Category Name" }}
                </h3>
                <p class="font-montserrat font-normal text-gray-300 text-sm leading-relaxed opacity-0 group-hover:opacity-100 transition-opacity duration-300">
                  {{ block.settings.category_description | default: "Explore our selection of premium products." }}
                </p>
                <div class="flex items-center text-[{{ settings.primary_color }}] font-montserrat font-semibold text-sm opacity-0 group-hover:opacity-100 transition-all duration-300 transform translate-y-2 group-hover:translate-y-0">
                  <span>Shop Now</span>
                  <svg class="ml-2 w-4 h-4 group-hover:translate-x-1 transition-transform" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                    <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M9 5l7 7-7 7"></path>
                  </svg>
                </div>
              </div>
            </div>

            <!-- Link overlay -->
            <a href="{{ block.settings.category_url | default: '/collections/all' }}" class="absolute inset-0 z-10" aria-label="Shop {{ block.settings.category_title }}"></a>
          </div>
        {% endif %}
      {% endfor %}
    </div>

    <!-- Call to action -->
    <div class="text-center animate-on-scroll">
      <a href="{{ section.settings.cta_url | default: '/collections' }}" class="inline-flex items-center justify-center gap-2 bg-[{{ settings.primary_color }}] hover:bg-[{{ settings.accent_color }}] text-white font-montserrat font-bold text-lg px-12 py-6 rounded-full shadow-lg hover:shadow-xl transition-all duration-300 hover:scale-105 group">
        {{ section.settings.cta_text | default: "VIEW ALL CATEGORIES" }}
        <svg class="ml-2 w-5 h-5 group-hover:translate-x-1 transition-transform" fill="none" stroke="currentColor" viewBox="0 0 24 24">
          <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M9 5l7 7-7 7"></path>
        </svg>
      </a>
    </div>
  </div>
</section>

{% schema %}
{
  "name": "Shop by Category",
  "tag": "section",
  "class": "section",
  "settings": [
    {
      "type": "text",
      "id": "section_title",
      "label": "Section Title",
      "default": "SHOP BY CATEGORY"
    },
    {
      "type": "textarea",
      "id": "section_description",
      "label": "Section Description",
      "default": "Discover our comprehensive range of garage transformation solutions, from premium flooring to innovative storage systems."
    },
    {
      "type": "text",
      "id": "cta_text",
      "label": "Call to Action Text",
      "default": "VIEW ALL CATEGORIES"
    },
    {
      "type": "url",
      "id": "cta_url",
      "label": "Call to Action URL",
      "default": "/collections"
    }
  ],
  "blocks": [
    {
      "type": "category",
      "name": "Category",
      "settings": [
        {
          "type": "text",
          "id": "category_title",
          "label": "Category Title",
          "default": "Flooring Solutions"
        },
        {
          "type": "textarea",
          "id": "category_description",
          "label": "Category Description",
          "default": "Premium garage flooring options including epoxy, tiles, and rubber mats."
        },
        {
          "type": "image_picker",
          "id": "category_image",
          "label": "Category Image"
        },
        {
          "type": "text",
          "id": "category_icon",
          "label": "Category Icon (emoji)",
          "default": "üè†"
        },
        {
          "type": "url",
          "id": "category_url",
          "label": "Category URL",
          "default": "/collections/flooring"
        }
      ]
    }
  ],
  "presets": [
    {
      "name": "Shop by Category",
      "blocks": [
        {
          "type": "category",
          "settings": {
            "category_title": "Flooring Solutions",
            "category_description": "Premium garage flooring options including epoxy, tiles, and rubber mats.",
            "category_url": "/collections/flooring"
          }
        },
        {
          "type": "category",
          "settings": {
            "category_title": "Storage Systems",
            "category_description": "Innovative storage solutions to maximize your garage space.",
            "category_url": "/collections/storage"
          }
        },
        {
          "type": "category",
          "settings": {
            "category_title": "Workbenches",
            "category_description": "Professional-grade workbenches for all your project needs.",
            "category_url": "/collections/workbenches"
          }
        }
      ]
    }
  ]
}
{% endschema %}